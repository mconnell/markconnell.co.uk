<!DOCTYPE html>
<html>
  <head>
    <title>Rails 3: HTML Escaping - Mark Connell</title>
    <meta name="author" content="Mark Connell" />
    <link rel="stylesheet" href="/styles.css" type="text/css" />

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28747989-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div class="header">
      <h1>Mark Connell</h1>
      <a href="/">Posts</a> - <a href="/about.html">About</a>
    </div>
    <div class="content">
  <div id="post_date">19 February 2010</div>
  <h2>Rails 3: HTML Escaping</h2>
  <p>Well I cocked this one up in a lightning talk I attempted to give by mixing up methods in the powerpoint, so figured I owe it to post something that makes a little more sense..</p>

<h3 id='rails_2'>Rails 2</h3>

<p>So you&#8217;ve been working on Rails apps for a while, and like all good developers, you&#8217;ve been escaping any content rendered in your views that your application&#8217;s users might have entered, right?</p>

<p>eg. like this:</p>

<pre><code> &lt;%= h some_string %&gt;</code></pre>

<h3 id='rails_3'>Rails 3</h3>

<p>Now in Rails 3, all strings are html escaped automatically, so:</p>

<pre><code>&lt;%= h some_string %&gt;
is now
&lt;%= some_string %&gt;</code></pre>

<p>No string by default is considered safe to render, and subsequently are HTML escaped. If you need to render html without it being escaped you need to effectively whitelist it as safe to render. This is done via <code>.html_safe</code></p>

<pre><code>&lt;%= some_string.html_safe %&gt;</code></pre>

<p>For a more detailed explanation, checkout: http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/</p>
</div>


  </body>
</html>
